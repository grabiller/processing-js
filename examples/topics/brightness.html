<!doctype html>
<html>
  <head>
    <meta charset="utf=8">
    <title>Brightness</title>
    <script type="text/javascript" src="../../processing.js"></script>
    <link type="text/css" rel="stylesheet" href="../style.css"/>
  </head>
  <body>
    <h4><a href="http://processingjs.org/">Processing.js</a> > <a href="index.html">Topic Demos</a> > Image Processing</h4>
    <h1>Brightness</h1>
    <p>This code was updated from the Java source to work with Processing.js asynchronous image loading.</p>
    <p>by Daniel Shiffman. Adjusts the brightness of part of the image. Pixels closer to the mouse will appear brighter.</p>
    <p><a href="http://processing.org/learning/topics/brightness.html"><b>Original Processing.org Example:</b> Brightness</a></p>
    <script id='pjs_code' type="application/processing">
      /* @pjs preload="data/wires.jpg" */
      
      PImage img;
      
      void setup() {
        size(200, 200);
        frameRate(30);
        img = loadImage("data/wires.jpg");
      }
      
      void draw() {
        loadPixels();
        for (int x = 0; x < img.width; x++) {
          for (int y = 0; y < img.height; y++ ) {
            // Calculate the 1D location from a 2D grid
            int loc = x + y*img.width;
            // Get the R,G,B values from image
            float r,g,b;
            r = red (img.pixels[loc]);
            //g = green (img.pixels[loc]);
            //b = blue (img.pixels[loc]);
            // Calculate an amount to change brightness based on proximity to the mouse
            float maxdist = 50;//dist(0,0,width,height);
            float d = dist(x,y,mouseX,mouseY);
            float adjustbrightness = 255*(maxdist-d)/maxdist;
            r += adjustbrightness;
            //g += adjustbrightness;
            //b += adjustbrightness;
            // Constrain RGB to make sure they are within 0-255 color range
            r = constrain(r,0,255);
            //g = constrain(g,0,255);
            //b = constrain(b,0,255);
            // Make a new color and set pixel in the window
            //color c = color(r,g,b);
            color c = color(r);
            pixels[loc] = c;
          }
        }
        updatePixels();
      }
    </script>
    <canvas></canvas>
    <pre id="show_code"></pre>
    <script type="text/javascript">
      var pre = '<b>// All Examples Written by <a href="http://reas.com/">Casey Reas</a> and <a href="http://benfry.com/">Ben Fry</a><br>// unless otherwise stated.</b><br>';
      document.getElementById('show_code').innerHTML = pre + document.getElementById('pjs_code').innerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n {6}/g,'<br>');
    </script>
  </body>
</html>
