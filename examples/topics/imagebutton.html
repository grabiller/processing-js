<!doctype html>
<html>
  <head>
    <meta charset="utf=8">
    <title>Image Button</title>
    <script type="text/javascript" src="../../processing.js"></script>
    <link type="text/css" rel="stylesheet" href="../style.css"/>
  </head>
  <body>
    <h4><a href="http://processingjs.org/">Processing.js</a> > <a href="index.html">Topic Demos</a> > GUI</h4>
    <h1>Image Button</h1>
    <p>This code was updated from the Java source to work with Processing.js asynchronous image loading.</p>
    <p>Loading images and using them to create a button.</p>
    <p><a href="http://processing.org/learning/topics/imagebutton.html"><b>Original Processing.org Example:</b> ImageButton</a></p>
    <script id='pjs_code' type="application/processing">
      /* @pjs preload="data/base.gif, data/roll.gif, data/down.gif"; */
      
      ImageButtons button;
      
      void setup()
      {
        size(200, 200);
        background(102, 102, 102);
        
        // Define and create image button
        PImage b = loadImage("data/base.gif");
        PImage r = loadImage("data/roll.gif");
        PImage d = loadImage("data/down.gif");
        int x = width/2 - b.width/2;
        int y = height/2 - b.height/2; 
        int w = b.width;
        int h = b.height;
        button = new ImageButtons(x, y, w, h, b, r, d);
      }
      
      void draw()
      {
        button.update();
        button.display();
      }
      
      class Button
      {
        int x, y;
        int w, h;
        color basecolor, highlightcolor;
        color currentcolor;
        boolean isOver = false;
        boolean isPressed = false;   
        
        void pressed() {
          if(isOver && mousePressed) {
            isPressed = true;
          } else {
            isPressed = false;
          }    
        }
        
        boolean overRect(int x, int y, int width, int height) {
        if (mouseX >= x && mouseX <= x+width && 
            mouseY >= y && mouseY <= y+height) {
          return true;
        } else {
          return false;
        }
      }
      }
      
      class ImageButtons extends Button 
      {
        PImage base;
        PImage roll;
        PImage down;
        PImage currentimage;
      
        ImageButtons(int ix, int iy, int iw, int ih, PImage ibase, PImage iroll, PImage idown) 
        {
          x = ix;
          y = iy;
          w = iw;
          h = ih;
          base = ibase;
          roll = iroll;
          down = idown;
          currentimage = base;
        }
        
        void update() 
        {
          over();
          pressed();
          if(isPressed) {
            currentimage = down;
          } else if (over){
            currentimage = roll;
          } else {
            currentimage = base;
          }
        }
        
        void over() 
        {
          if( overRect(x, y, w, h) ) {
            isOver = true;
          } else {
            isOver = false;
          }
        }
        
        void display() 
        {
          image(currentimage, x, y);
        }
      }
    </script>
    <canvas></canvas>
    <pre id="show_code"></pre>
    <script type="text/javascript">
      var pre = '<b>// All Examples Written by <a href="http://reas.com/">Casey Reas</a> and <a href="http://benfry.com/">Ben Fry</a><br>// unless otherwise stated.</b><br>';
      document.getElementById('show_code').innerHTML = pre + document.getElementById('pjs_code').innerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n {6}/g,'<br>');
    </script>
  </body>
</html>
